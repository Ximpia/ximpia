<!DOCTYPE html>
{% load static from staticfiles %}
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>{% block title %}{% endblock %}</title>

<link rel="shortcut icon" href="{% static "ximpia/images/favicon.ico" %}">
<link rel="apple-touch-icon" href="{% static "ximpia/images/ximpia_icon.png" %}">

<link rel="stylesheet" href="{% static "jQueryThemes/start/jquery-ui-1.8.9.custom.css" %}" type="text/css" />
<link href="{% static "ximpia/css/ximpia.qtip.css" %}" rel="stylesheet" type="text/css" />	
<link href="{% static "ximpia/css/ximpia.combobox.css" %}" rel="stylesheet" type="text/css" />
<link href="{% static "ximpia/css/ximpia.jscrollpane.css" %}" rel="stylesheet" type="text/css" />
<link href="{% static "ximpia/css/ximpia.selectBox.css" %}" rel="stylesheet" type="text/css" />
<link href="{% static "ximpia/css/ximpia.flexbox.css" %}" rel="stylesheet" type="text/css" />
<link href="{% static "ximpia/css/main.css" %}" rel="stylesheet" type="text/css" />
</head>

<body>
<!-- Facebook should be supportted by external links: buttons that link to fb in modal window, etc... -->
<!--<div id="fb-root"> </div>-->

<div id="id_header_wrapper">
<div id="id_header" >
	
<!--<header id="id_header" >-->

<form id="form_header" action="" method="post" >

<div id="Logo" style="margin-top: 5px; margin-left: 0px">
<a href="/" ><img id="LogoImg" src="{% static "images/logo.png" %}" alt=" " style="height: 35px; " /> </a>
<!-- Make this link with javascript when user logs in: href="#" onclick="return false" -->
<!-- <a href="/" onclick="return false"><img id="LogoImg" src="{% static "images/logo.png" %}" alt=" " style="height: 35px;margin: 1px 10px;" /> </a> -->
</div>

<div id="id_header_extra">

<input type="text" id="id_header_search" name="search" class="InputText viewSearch" style="float: left; width: 270px; margin-right: 5px; margin-top: 15px" x-webkit-speech  />

<div id="IconMenu" style="padding-top: 0px">	

<nav id="id_mainIcons" >
</nav>
<nav id="id_viewIcons" >
</nav>
<nav id="id_serviceIcons" >
</nav>

<div style="clear: both" > </div>

</div>

</div>

<nav>
</nav>

</form>

</div>
</div>

<div id="Wrapper">

<nav id="id_navBar" >
</nav>

<section id="id_sect_loading">
<div style="width: 300px; margin: auto; margin-top: 100px">
<img src="{% static "ximpia/images/loadingBar.gif" %}" />
<div id="id_loading_text" >Loading...</div>
</div>
</section>

<div id="id_view_zone" >

{% block id_view %}
{% endblock %}

<section id="id_sectionTitle" class="sectionTitle">

{% block sectionTitle %}
{% endblock%}

</section>

<section id="id_content" class="sectionContent" >	

{% block sectionContent %}
{% endblock%}

<input type="hidden" name="result" value="{{result}}" />

</section>

<section id="id_sectionButton" class="sectionButton">

{% block buttons %}
{% endblock %}

</section>

</div>

</div>

<br/>

<!--<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>-->
<script type="text/javascript" src="{% static "ximpia/js/jquery/jquery-1.6.min.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.metadata.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.jqDock.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-common/ximpia.settings.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-common/ximpia.common.js" %}"></script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBQzkNe8GObf8_Wx_SJEVFvejmByPpknWk&sensor=false"></script>

{% block scripts %}
{% endblock %}

<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.passStrengthener.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.form.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.validate.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.jsonSuggest.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.networkIcon.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.loading.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.pageButton.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.mousewheel.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.mwheelIntent.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.jscrollpane.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.selectBox.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.flexbox.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.contextMenu.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.render_ext.js" %}"></script>

<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/layout/ximpia.container.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/input/ximpia.input.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/list/ximpia.list.select.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/list/ximpia.list.field.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/input/ximpia.textarea.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/action/ximpia.button.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/action/ximpia.link.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/window/ximpia.popup.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/action/ximpia.icon.js" %}"></script>
<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/visual-components/action/ximpia.context_menu.js" %}"></script>

<script type="text/javascript" src="{% static "ximpia/js/core/ximpia-plugins/ximpia.qtip.js" %}"></script>
<!--<script type="text/javascript" src="{% static "ximpia/js/json.js" %}"></script>-->
<!--<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>-->
<!-- x-webkit-speech -->

<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>


<script>

jQuery(document).ready(function($){

	//alert('Holaaa');
	$("#id_sect_loading").css('left', $(".sectionComp").offset().left);
	$("#id_sect_loading").css('display', 'block');
	ximpia.common.Page.init();
	//var viewData = ximpia.common.Window.getViewAttrs();
	//ximpia.console.log('viewData...');
	//ximpia.console.log(viewData);
	var pageJx = ximpia.common.PageAjax();
	var data = $('[name="result"]').val();
	ximpia.console.log('data...');
	ximpia.console.log(data);
	
	pageJx.renderCtx(data);
	/*ximpia.common.Page.init();
	var viewData = ximpia.common.Window.getViewAttrs();
	var pageJx = ximpia.common.PageAjax();
	var callback = eval(viewData.callback);
	var data = $('[name="ctx"]').val();
	pageJx.init({	path: ximpia.common.Path.getBusiness(),
			viewName: viewData.viewName,
			callback: callback,
			verbose: true});
	pageJx.renderCtx(data)*/

	// Menu navigation
	$(window).bind('popstate', function(event) {
		var state = event.originalEvent.state;
		if (state) {
			ximpia.console.log(state);
			pageJx.getView({ view: state.view, params: JSON.stringify({}), app: state.app}, state=false);
		}
	});

	var stateData = {
			appSlug: "{{appSlug}}",
			viewSlug: "{{viewSlug}}",
			app: "{{app}}",
			view: "{{view}}"
	};
	window.history.pushState(stateData, "{{title}}", "{{request.path}}");
	
});

</script>

</body>

</html>
